{"version":3,"sources":["webpack:///src/models/rcdjob/datareport/onedim/onedimRecord.vue","webpack:///./src/models/rcdjob/datareport/onedim/onedimRecord.vue?c9eb","webpack:///./src/models/rcdjob/datareport/onedim/onedimRecord.vue","webpack:///./node_modules/core-js/library/fn/object/values.js","webpack:///./node_modules/core-js/library/modules/es7.object.values.js","webpack:///./node_modules/babel-runtime/core-js/object/values.js","webpack:///./node_modules/core-js/library/modules/_object-to-array.js"],"names":["onedimRecord","name","describe","components","WorkMain","props","jobId","type","String","reportId","unitId","Number","unitType","isView","data","lastStep","saveFlag","definedColums","columDatas","dataObject","hasMounted","unitFlds","unitDatas","validateUnitDatas","methods","getUnitFldsConfig","_this","this","loading","$loading","lock","text","spinner","background","BaseRequest","url","params","groupId","clientType","then","response","close","unitFldArray","unitFldTypes","forEach","unitTypeConfig","unitFld","push","catch","error","Message","success","getReportFldDatas","_this2","console","log","Object","unitDatasTmp","reportData","colum_id","fld_id","doSaveUnitContext","processName","_this3","method","report_id","job_id","reportJobInfos","values_default","$emit","doValidateUnitContext","_this4","validateFailed","validateUnitDatasTmp","errorFldIds","keys_default","length","errorFldId","failedMessage","doSubmitContext","setSaveFlag","mounted","activated","onedim_onedimRecord","render","_vm","_h","$createElement","_c","_self","staticStyle","background-color","height","margin","padding","border-radius","ref","attrs","label-width","_l","key","size","label","fld_name","span","width","float","disabled","model","value","callback","$$v","$set","expression","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","module","exports","values","$export","$values","S","it","default","__esModule","getKeys","toIObject","isEnum","f","isEntries","O","keys","i","result","call"],"mappings":"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","file":"static/js/4.2833a2c8c3a2a1fb8e07.js","sourcesContent":["<template>\n  <div style=\"background-color: white;height:calc(100% - 50px);margin:20px 0 0 0 ;padding:30px 0 0 0;border-radius:10px;\">\n    <el-form ref=\"form\"  label-width=\"40%\">\n      <el-form-item :key=\"unitFld.fld_id\" size=\"mini\" v-for=\"unitFld in unitFlds\" :label=\"unitFld.fld_name\" :error=\"validateUnitDatas['f'+unitFld.fld_id]\">\n      <!--<el-form-item :key=\"unitFld.fld_id\" size=\"mini\" v-for=\"unitFld in unitFlds\" :label=\"unitFld.fld_name\">-->\n        <el-col :span=\"23\">\n            <!--<el-tooltip class=\"item\" effect=\"dark\" :content=\"dataColum.colum_desc\" placement=\"top\">-->\n              <el-input v-model=\"unitDatas['f'+unitFld.fld_id]['record_data']\"\n                        :disabled=\"isView=='Y'\" style=\"width:50%;float: left;\" >\n                <!--<template v-if=\"dataColum.colum_point!=null&&dataColum.colum_point!=''\" slot=\"append\">{{dataColum.colum_point}}</template>-->\n              </el-input>\n            <!--</el-tooltip>-->\n        </el-col>\n      </el-form-item>\n    </el-form>\n\n    <!--<el-button v-if=\"isView!='Y'\" @click=\"saveUnitContext(false)\" type=\"info\">保存</el-button>-->\n    <!--&lt;!&ndash;<el-button type=\"primary\">上一步</el-button>&ndash;&gt;-->\n    <!--<el-button v-if=\"isView!='Y'\" @click=\"nextStep\" type=\"success\">下一步</el-button>-->\n  </div>\n</template>\n\n<script>\n  import WorkMain from \"@/models/public/WorkMain\"\n\n  export default {\n    name: \"OnedimRecord\",\n    describe:\"一维报表填报单元\",\n    components: {\n      WorkMain\n    },\n    props:{\n      jobId:{\n        type:String\n      },\n      reportId:{\n        type:String\n      },\n      unitId:{\n        type:Number\n      },\n      unitType:{\n        type:Number\n      },\n      isView:{\n        type:String\n      }\n\n    },\n    data() {\n      return {\n        lastStep:false,\n        saveFlag:'N',//载入页面后是否保存当前页面数据 Y:保存 N：不做任何动作仅仅载入 S:提交 V：校验\n        definedColums:[],\n        columDatas:{},\n        dataObject:[],\n        hasMounted:false,\n        unitFlds:[],\n        unitDatas:{},\n        validateUnitDatas:{}\n      }\n    },\n    methods:{\n      getUnitFldsConfig(){\n        let loading = null\n        if(this.saveFlag=='N') {\n          loading = this.$loading({\n            lock: true,\n            text: '获取填报单元信息中.......',\n            spinner: 'el-icon-loading',\n            background: 'rgba(0, 0, 0, 0.7)'\n          })\n        }\n        this.BaseRequest({\n          url:\"/record/process/getClientFldByUnitId\",\n          params:{\n            groupId:this.unitId,\n            clientType:'PC'\n          }\n        }).then(response=>{\n          if(loading){\n            loading.close();\n          }\n          if(response!=null){\n            let unitFldArray = []\n            this.unitFldTypes = response\n            response.forEach(unitTypeConfig=>{\n              unitTypeConfig.unitFlds.forEach(unitFld=>{\n                unitFldArray.push(unitFld)\n              })\n            })\n            this.unitFlds =unitFldArray\n\n          }\n\n\n        }).catch(error=>{\n            this.Message.success(error)\n            loading.close()\n          }\n        );\n      },\n\n      getReportFldDatas(){\n        this.BaseRequest({\n          url:\"/record/process/getFldReportDatas\",\n          params:{\n            jobId:this.jobId,\n            reportId:this.reportId,\n            groupId:this.unitId\n          }\n        }).then(response=>{\n          console.log(response)\n          const reportDataLineMap = new Object()\n          const dbDataLineArray = []\n          if(response){\n            const unitDatasTmp = {}\n            response.forEach(reportData=>{\n              const colum_id = reportData.colum_id\n              const fld_id = reportData.fld_id\n              unitDatasTmp['f'+fld_id] = reportData\n            //   if(!dbDataLineArray[colum_id]){\n            //     dbDataLineArray[colum_id] = new Object()\n            //     dbDataLineArray[colum_id].colum_id = colum_id\n            //   }\n            //   dbDataLineArray[colum_id][\"f\"+fld_id] = reportData.record_data\n            })\n            this.unitDatas = unitDatasTmp\n          }\n        }).catch(error=>{\n            this.Message.success(error)\n          }\n        );\n      },\n      doSaveUnitContext(processName){\n        this.BaseRequest({\n          url:\"/record/process/saveSimpleDatas\",\n          method:'post',\n          data:{\n            report_id:this.reportId,\n            job_id:this.jobId,\n            reportJobInfos:Object.values(this.unitDatas)\n          }\n        }).then(response=>{\n          // this.$emit(\"refreshSaveLoading\",this.unitId,\"保存成功\")\n          // this.$emit(\"checkStepAndSave\",this.unitId,this.saveFlag)\n          console.log(response)\n          if(response){\n            this.$emit(\"saveReportsCallBack\",this.unitId,processName)\n          }else{\n            this.$emit(\"saveReportsCallBack\",this.unitId,processName,\"保存失败\")\n          }\n        }).catch(error => {\n          this.$emit(\"saveReportsCallBack\",this.unitId,processName,error)\n        });\n      },\n\n      doValidateUnitContext(processName){\n        this.validateUnitDatas = {}\n        let validateFailed = false\n        const validateUnitDatasTmp = {}\n        this.BaseRequest({\n          url:\"/record/process/validateSimpleDatas\",\n          method:'post',\n          data:{\n            reportJobInfos:Object.values(this.unitDatas)\n          }\n        }).then(response=>{\n          console.log(response)\n\n          if(response){\n            const errorFldIds = Object.keys(response);\n            if(errorFldIds!=null&&errorFldIds.length>0){\n              validateFailed = true\n            }\n\n            errorFldIds.forEach(errorFldId=>{\n              validateUnitDatasTmp['f'+errorFldId] = response[errorFldId]\n            })\n\n          }else{\n            this.$emit(\"validateReportsCallBack\",this.unitId,processName,\"校验出现异常\")\n          }\n\n          this.validateUnitDatas = validateUnitDatasTmp\n\n          // this.$emit(\"checkStepAndSave\",this.unitId,this.saveFlag)\n          let failedMessage = null\n          if(validateFailed){\n            // this.$emit(\"refreshSaveLoading\",this.unitId,\"有输入错误\")\n            failedMessage = \"有输入错误\"\n          }\n\n          this.$emit(\"validateReportsCallBack\",this.unitId,processName,failedMessage)\n\n        });\n      },\n      doSubmitContext(){\n        this.doSaveUnitContext(true)\n      },\n      setSaveFlag(saveFlag){\n        this.saveFlag = saveFlag\n      }\n    },\n    mounted:function(){\n      this.getUnitFldsConfig()\n      this.getReportFldDatas()\n    },\n    activated(){\n    }\n  }\n</script>\n\n<style lang=\"css\">\n  .el-form-item__label{\n    font-size:12px !important;\n  }\n</style>\n\n<style scoped>\n  .el-form{\n    margin:0 0 30px 0;\n  }\n\n  .el-form-item{\n    margin:0 0 15px 0;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/models/rcdjob/datareport/onedim/onedimRecord.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"background-color\":\"white\",\"height\":\"calc(100% - 50px)\",\"margin\":\"20px 0 0 0\",\"padding\":\"30px 0 0 0\",\"border-radius\":\"10px\"}},[_c('el-form',{ref:\"form\",attrs:{\"label-width\":\"40%\"}},_vm._l((_vm.unitFlds),function(unitFld){return _c('el-form-item',{key:unitFld.fld_id,attrs:{\"size\":\"mini\",\"label\":unitFld.fld_name,\"error\":_vm.validateUnitDatas['f'+unitFld.fld_id]}},[_c('el-col',{attrs:{\"span\":23}},[_c('el-input',{staticStyle:{\"width\":\"50%\",\"float\":\"left\"},attrs:{\"disabled\":_vm.isView=='Y'},model:{value:(_vm.unitDatas['f'+unitFld.fld_id]['record_data']),callback:function ($$v) {_vm.$set(_vm.unitDatas['f'+unitFld.fld_id], 'record_data', $$v)},expression:\"unitDatas['f'+unitFld.fld_id]['record_data']\"}})],1)],1)}))],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-eec00b9a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/models/rcdjob/datareport/onedim/onedimRecord.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-eec00b9a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./onedimRecord.vue\")\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-eec00b9a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./onedimRecord.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./onedimRecord.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./onedimRecord.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-eec00b9a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./onedimRecord.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-eec00b9a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/models/rcdjob/datareport/onedim/onedimRecord.vue\n// module id = null\n// module chunks = ","require('../../modules/es7.object.values');\nmodule.exports = require('../../modules/_core').Object.values;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/values.js\n// module id = TmV0\n// module chunks = 3 4","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $values = require('./_object-to-array')(false);\n\n$export($export.S, 'Object', {\n  values: function values(it) {\n    return $values(it);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.object.values.js\n// module id = fZOM\n// module chunks = 3 4","module.exports = { \"default\": require(\"core-js/library/fn/object/values\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/values.js\n// module id = gRE1\n// module chunks = 3 4","var getKeys = require('./_object-keys');\nvar toIObject = require('./_to-iobject');\nvar isEnum = require('./_object-pie').f;\nmodule.exports = function (isEntries) {\n  return function (it) {\n    var O = toIObject(it);\n    var keys = getKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) if (isEnum.call(O, key = keys[i++])) {\n      result.push(isEntries ? [key, O[key]] : O[key]);\n    } return result;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-to-array.js\n// module id = mbce\n// module chunks = 3 4"],"sourceRoot":""}