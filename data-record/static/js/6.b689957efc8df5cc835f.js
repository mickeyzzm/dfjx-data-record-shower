webpackJsonp([6],{H08U:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("mvHQ"),a=i.n(n),l=i("Dd8w"),o=i.n(l),r={data:function(){return{pagination:{total:0,currentPageIndex:1,pageSize:10},treeData:[{label:"填报任务",job_id:-1,children:[]}],tableData:[],flgTreeData:[],unitDialogVisible:!1,flgDialogVisible:!1,treeId:"",insertJobForm:{job_unit_name:"",job_unit_type:0,job_unit_active:0},options:[{label:"启用",value:1},{label:"停用",value:0}],unittype:[{label:"单项",value:1},{label:"表格",value:0}],keyWorld:"",nodeList:[],jobUnitid:[],activeList:[],current:{},activeRcdt:[]}},methods:{leftTreeList:function(){var t=this;this.BaseRequest({url:"/reporting/leftrcdjobconfig",method:"get"}).then(function(e){e.length>0&&e.map(function(e){t.treeData[0].children.push({label:e.job_name,job_id:e.job_id,id:e.job_id})}),t.$nextTick(function(){t.$refs.treeBox.setCurrentKey(e[0].job_id)})})},insertUnit:function(){this.unitDialogVisible=!0,this.insertJobForm={job_unit_name:"",job_unit_type:0,job_unit_active:0}},unitList:function(){var t=this;this.BaseRequest({url:"/reporting/rcdjobunitconfiglist",method:"get",params:{currPage:this.pagination.currentPageIndex,pageSize:this.pagination.pageSize,job_id:this.treeId?this.treeId:1}}).then(function(e){t.tableData=e.dataList,t.pagination.total=t.tableData.length})},subUnitconfig:function(){var t=this;this.BaseRequest({url:"/reporting/insertrcdjobunitconfig",method:"get",params:o()({job_id:this.treeId?this.treeId:1},this.insertJobForm)}).then(function(e){t.unitDialogVisible=!1,"success"===e?(t.unitList(),t.$message.success("新增成功")):t.$message.error("新增失败")})},deletercdjobunitconfig:function(t){var e=this;this.$confirm("确认要删除该任务组吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"}).then(function(){e.BaseRequest({url:"/reporting/deletercdjobunitconfig",method:"get",params:{job_unit_id:t.job_unit_id}}).then(function(t){"success"===t?(e.$message.success("删除成功"),e.unitList()):e.$message.error("删除失败")})}).catch(function(){return!1})},handleNodeClick:function(t){if(this.treeId=t.job_id,-1===t.job_id)return!1;this.unitList(t)},fldconfig:function(t){this.flgDialogVisible=!0,this.current=t,this.selectrcdjobunitfld()},leftrcddtMenuSt:function(){var t=this;this.BaseRequest({url:"/rcdDt/leftrcddtproj",method:"get"}).then(function(e){e.length>0&&e.map(function(e){t.flgTreeData.push({label:e.proj_name,proj_id:e.proj_id,disabled:!0,children:[]}),t.leftrcddtMenuNd(e.proj_id)})})},leftrcddtMenuNd:function(t){var e=this;this.BaseRequest({url:"/rcdDt/leftrcddtcatg",method:"get",params:{proj_id:t}}).then(function(i){i.length>0&&e.flgTreeData.map(function(n){n.proj_id===t&&(n.children=[],i.map(function(t){e.leftrcddtMenuRd(t.catg_id),n.children.push({label:t.catg_name,catg_id:t.catg_id,children:[],disabled:!0})}))})})},leftrcddtMenuRd:function(t){var e=this;this.BaseRequest({url:"/rcdDt/leftrcddtfld",method:"get",params:{catg_id:t}}).then(function(i){i.length>0&&e.flgTreeData.map(function(e){e.children.length>0&&e.children.map(function(e){e.catg_id===t&&(e.disabled=!1,e.children=[],i.map(function(t){e.children.push({label:t.fld_name,fld_id:t.fld_id})}))})})})},selectrcdjobunitfld:function(){var t=this;this.BaseRequest({url:"/reporting/selectrcdjobunitfld",method:"get",params:{job_unit_id:this.current.job_unit_id}}).then(function(e){t.$refs.tree.setCheckedNodes(e),t.activeRcdt=[],e.map(function(e){t.activeRcdt.push(e.fld_id)})})},subFlg:function(){var t=this;this.nodeList=this.$refs.tree.getCheckedNodes(),this.jobUnitid=[],this.nodeList.map(function(e){e.fld_id&&t.jobUnitid.push(e.fld_id)}),this.BaseRequest({url:"/reporting/rcdjobunitfld",method:"get",params:{fld_id:this.jobUnitid.join(","),jobunitid:a()(this.current.job_unit_id)}}).then(function(e){"success"===e?(t.flgDialogVisible=!1,t.$message.success("添加成功")):(t.$message.error("添加失败"),t.flgDialogVisible=!1)})},handleSizeChange:function(t){this.pagination.pageSize=t},handleCurrentChange:function(t){this.pagination.currentPageIndex=t}},created:function(){this.leftTreeList(),this.unitList(),this.leftrcddtMenuSt()}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-container",[i("el-aside",{staticStyle:{width:"20%"}},[i("el-tree",{ref:"treeBox",attrs:{data:t.treeData,"node-key":"job_id","expand-on-click-node":!1,"default-expanded-keys":[-1],"highlight-current":!0},on:{"node-click":t.handleNodeClick}})],1),t._v(" "),i("el-main",[i("div",{staticStyle:{"text-align":"left"}},[i("el-button",{attrs:{disabled:-1===t.treeId,size:"mini",type:"primary"},on:{click:t.insertUnit}},[t._v("新增任务组")])],1),t._v(" "),i("el-table",{staticStyle:{width:"90%"},attrs:{"header-cell-style":{background:"#f6f6f7"},data:t.tableData,size:"mini",border:"",stripe:""}},[i("el-table-column",{attrs:{type:"index",width:"100",label:"任务组编码",resizable:!1}}),t._v(" "),i("el-table-column",{attrs:{prop:"job_unit_name",label:"任务组名称",resizable:!1}}),t._v(" "),i("el-table-column",{attrs:{label:"状态",resizable:!1},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{style:0==e.row.job_unit_active?"color:red":"color:blue"},[t._v(t._s(0==e.row.job_unit_active?"停用":"启用"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作",resizable:!1},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){t.fldconfig(e.row)}}},[t._v("指标")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){t.deletercdjobunitconfig(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("el-pagination",{attrs:{"current-page":t.pagination.currentPageIndex,"page-sizes":[10,15,20],"page-size":t.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{attrs:{title:"新增任务组",visible:t.unitDialogVisible,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(e){t.unitDialogVisible=e}}},[i("el-form",{attrs:{model:t.insertJobForm}},[i("el-form-item",{staticClass:"public",attrs:{label:"任务组名称："}},[i("el-input",{attrs:{placeholder:"请输入任务组名称"},model:{value:t.insertJobForm.job_unit_name,callback:function(e){t.$set(t.insertJobForm,"job_unit_name",e)},expression:"insertJobForm.job_unit_name"}})],1),t._v(" "),i("el-form-item",{staticClass:"public",attrs:{label:"任务组状态："}},[i("el-select",{staticStyle:{width:"100%"},model:{value:t.insertJobForm.job_unit_active,callback:function(e){t.$set(t.insertJobForm,"job_unit_active",e)},expression:"insertJobForm.job_unit_active"}},t._l(t.options,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{staticClass:"public",attrs:{label:"任务组类型："}},[i("el-select",{staticStyle:{width:"100%"},model:{value:t.insertJobForm.job_unit_type,callback:function(e){t.$set(t.insertJobForm,"job_unit_type",e)},expression:"insertJobForm.job_unit_type"}},t._l(t.unittype,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{staticClass:"canel"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.unitDialogVisible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.subUnitconfig}},[t._v("确定")])],1)],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"选择指标",visible:t.flgDialogVisible,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(e){t.flgDialogVisible=e}}},[i("div",{staticStyle:{width:"80%"}},[i("el-tree",{ref:"tree",attrs:{data:t.flgTreeData,"node-key":"fld_id","show-checkbox":"","highlight-current":!0,"default-expanded-keys":t.activeRcdt}}),t._v(" "),i("div",{staticStyle:{"text-align":"right","margin-top":"30px"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.flgDialogVisible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.subFlg}},[t._v("确定")])],1)],1)])],1)},staticRenderFns:[]};var c=i("VU/8")(r,s,!1,function(t){i("UI6x")},"data-v-66e35412",null);e.default=c.exports},UI6x:function(t,e){},mvHQ:function(t,e,i){t.exports={default:i("qkKv"),__esModule:!0}},qkKv:function(t,e,i){var n=i("FeBl"),a=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return a.stringify.apply(a,arguments)}}});
//# sourceMappingURL=6.b689957efc8df5cc835f.js.map